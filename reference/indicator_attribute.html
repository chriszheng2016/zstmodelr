<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add attribute to indicator timeseries of stocks — indicator_attribute • zstmodelr</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Add attribute to indicator timeseries of stocks — indicator_attribute" />
<meta property="og:description" content="Compute attribute values of stocks and add them to indicator timeseries." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">zstmodelr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/zstmodelr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/zb-vigette.html">zstmodelr User guide</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/chriszheng2016/zstmodelr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add attribute to indicator timeseries of stocks</h1>
    <small class="dont-index">Source: <a href='https://github.com/chriszheng2016/zstmodelr/blob/master/R/indicator-attribute.R'><code>R/indicator-attribute.R</code></a></small>
    <div class="hidden name"><code>indicator_attribute.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Compute attribute values of stocks and add them to indicator timeseries.</p>
    </div>

    <pre class="usage"><span class='fu'>attr_indicators</span>(<span class='no'>ts_indicators</span>, <span class='no'>new_attr_def</span>, <span class='kw'>parallel</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>attr_indicators_indcd</span>(<span class='no'>stock_db</span>, <span class='no'>ts_indicators</span>, <span class='kw'>parallel</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='fu'>attr_indicators_trdstat</span>(<span class='no'>stock_db</span>, <span class='no'>ts_indicators</span>, <span class='kw'>parallel</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>ts_indicators</th>
      <td><p>A dataframe of indicator timeseries.</p></td>
    </tr>
    <tr>
      <th>new_attr_def</th>
      <td><p>A function to compute attribute value for stock
indicator.</p></td>
    </tr>
    <tr>
      <th>parallel</th>
      <td><p>A logic to determine whether to use parallel processing.
Default TRUE means to use parallel processing.</p></td>
    </tr>
    <tr>
      <th>stock_db</th>
      <td><p>A stock database object to get data.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A dataframe of indicator timeseries with new attribute if succeed,
otherwise NULL.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>attr_indicators</code> is a working horse behind
<code>attr_indicators_indcd</code>,<code>attr_indicators_trdstat</code>,
which is mainly used to develop customized attribute function to
add attribute to indicator timeseries.</p>
<p><code>attr_indicators_indcd</code>, <code>attr_indicators_trdstat</code>, etc.
are used to add predefined attribute to indicator timeseries by using data from
stock_db.</p>
<p>There are two way to add attribute to timeseries of indicators of stocks:</p><ul>
<li><p><strong>add attribute directly</strong>:
use <code>attr_indicators_indcd</code>, <code>attr_indicators_trdstat</code>
to add attribute directly. The pros is easy to use, the cons is slow since
it have to load data from stock database each calling. The method is
mainly used to add one attribute to one indicator timeseries.</p></li>
<li><p><strong>add attribute indirectly</strong>:
use <code><a href='ind_attr_def_indcd.html'>ind_attr_def_indcd</a></code>, <code><a href='ind_attr_def_trdstat.html'>ind_attr_def_trdstat</a></code> and
<code><a href='modify_indicator.html'>modify_indicator</a></code>. The pros is that it can be faster by dividing
defining attribute(load data from database once) and modifying indicators
(can modify repeatedly by using same attribute definition). The cons is that it is more complex than direct method. The method is mainly
used to add same attribute to multi-indicators timeseries.</p></li>
</ul>

    <h2 class="hasAnchor" id="functions"><a class="anchor" href="#functions"></a>Functions</h2>

    
<ul>
<li><p><code>attr_indicators</code>: add customized attribute to indicators
timeseries of stocks.</p></li>
<li><p><code>attr_indicators_indcd</code>: add attribute of industry code to indicator
timeseries of stocks.</p></li>
<li><p><code>attr_indicators_trdstat</code>: add attribute of trading status to indicator
timeseries of stocks.</p></li>
</ul>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {

 <span class='co'># create a indicator from vars dataset.</span>
  <span class='no'>ts_indicator</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='create_indicator.html'>create_indicator</a></span>(<span class='no'>ds_def_vars</span>,
                                 <span class='kw'>ind_def_fun</span> <span class='kw'>=</span> <span class='no'>ind_def_fun</span>,
                                 <span class='kw'>debug</span> <span class='kw'>=</span> <span class='no'>debug</span>,
                                 <span class='kw'>date_index_field</span> <span class='kw'>=</span> <span class='st'>"date"</span>,
                                 <span class='kw'>key_fields</span> <span class='kw'>=</span> <span class='no'>key_fields</span>,
                                 <span class='kw'>parallel</span> <span class='kw'>=</span> <span class='no'>parallel</span>)


 <span class='co'># --- add attribute directly ---</span>

 <span class='co'># add attribute of indcd</span>
 <span class='no'>ts_indicators_with_indcd</span> <span class='kw'>&lt;-</span> <span class='fu'>attr_indicators_indcd</span>(<span class='no'>stock_db</span>,
                      <span class='kw'>ts_indicators</span> <span class='kw'>=</span> <span class='no'>ts_indicators</span>)

 <span class='co'># add attribute of trdstats</span>
 <span class='no'>ts_indicators_wide_with_attr</span> <span class='kw'>&lt;-</span> <span class='fu'>attr_indicators_trdstat</span>(<span class='no'>stock_db</span>,
                      <span class='kw'>ts_indicators</span> <span class='kw'>=</span> <span class='no'>ts_indicators</span>)

 <span class='co'># --- add attribute indirectly ---</span>

 <span class='co'># create attr defs by using data from stock</span>
 <span class='no'>new_attr_indcd</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='ind_attr_def_indcd.html'>ind_attr_def_indcd</a></span>(<span class='no'>stock_db</span>)

 <span class='co'># use attribute def to modify multi-indicators</span>
 <span class='kw'>for</span> (<span class='no'>i</span> <span class='kw'>in</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq_len</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>NROW</a></span>(<span class='no'>ds_ts_indicators</span>))) {

    <span class='no'>ts_indicator</span> <span class='kw'>&lt;-</span> <span class='no'>ds_ts_indicators</span>$<span class='no'>data</span><span class='kw'>[[</span><span class='no'>i</span>]]

    <span class='no'>ts_indicator</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='modify_indicator.html'>modify_indicator</a></span>(
                     <span class='kw'>ts_indicator</span> <span class='kw'>=</span> <span class='no'>ts_indicator</span>,
                     <span class='kw'>modify_fun</span> <span class='kw'>=</span> <span class='no'>new_attr_indcd</span>,
                     <span class='kw'>replace_exist</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
                     <span class='kw'>date_index_field</span> <span class='kw'>=</span> <span class='st'>"date"</span>,
                     <span class='kw'>key_fields</span> <span class='kw'>=</span> <span class='st'>"stkcd"</span>,
                     <span class='kw'>parallel</span> <span class='kw'>=</span> <span class='no'>parallel</span>
                    )
 }

}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Chris Zheng.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


